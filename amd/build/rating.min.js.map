{"version":3,"sources":["../src/rating.js"],"names":["define","Rating","questionDiv","clearButton","querySelector","addEventListener","e","preventDefault","clearRating","radios","querySelectorAll","forEach","radio","index","checked","init","questionId","M","util","js_pending","document","getElementById","js_complete"],"mappings":"AAuBAA,OAAM,gCAAC,UAAW,CAMd,QAASC,CAAAA,CAAT,CAAgBC,CAAhB,CAA6B,CACzB,GAAIC,CAAAA,CAAW,CAAGD,CAAW,CAACE,aAAZ,CAA0B,mCAA1B,CAAlB,CACAD,CAAW,CAACE,gBAAZ,CAA6B,OAA7B,CAOA,SAA2BC,CAA3B,CAA8B,CAC1BA,CAAC,CAACC,cAAF,GACAC,CAAW,CAACN,CAAD,CACd,CAVD,EAiBA,QAASM,CAAAA,CAAT,CAAqBN,CAArB,CAAkC,CAC9B,GAAIO,CAAAA,CAAM,CAAGP,CAAW,CAACQ,gBAAZ,CAA6B,kCAA7B,CAAb,CACAD,CAAM,CAACE,OAAP,CAAe,SAASC,CAAT,CAAgBC,CAAhB,CAAuB,CAClC,GAAc,CAAV,GAAAA,CAAJ,CAAiB,CACbD,CAAK,CAACE,OAAN,GACH,CAFD,IAEO,IAAI,KAAAF,CAAK,CAACE,OAAV,CAA4B,CAC/BF,CAAK,CAACE,OAAN,GACH,CACJ,CAND,CAOH,CACJ,CAED,MAAO,CAMHC,IAAI,CAAE,cAASC,CAAT,CAAqB,CACvBC,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,UAAYH,CAA9B,EACA,GAAId,CAAAA,CAAW,CAAGkB,QAAQ,CAACC,cAAT,CAAwBL,CAAxB,CAAlB,CACA,GAAIf,CAAAA,CAAJ,CAAWC,CAAX,EACAe,CAAC,CAACC,IAAF,CAAOI,WAAP,CAAmB,UAAYN,CAA/B,CACH,CAXE,CAaV,CAlDK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n//\n\n/**\n * JavaScript for rating.\n *\n * @package    qbehaviour_selfassess\n * @copyright  2020 The Open University\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(function() {\n    /**\n     * Rating object.\n     * @param {Element} questionDiv\n     * @constructor\n     */\n    function Rating(questionDiv) {\n        let clearButton = questionDiv.querySelector('.rating .stars input[type=button]');\n        clearButton.addEventListener('click', handleButtonClick);\n\n        /**\n         * Handles clicks on the clear button.\n         *\n         * @param {Event} e\n         */\n        function handleButtonClick(e) {\n            e.preventDefault();\n            clearRating(questionDiv);\n        }\n\n        /**\n         * Clear rating and set the rating to not rated.\n         *\n         * @param {Element} questionDiv\n         */\n        function clearRating(questionDiv) {\n            let radios = questionDiv.querySelectorAll('.rating .stars input[type=radio]');\n            radios.forEach(function(radio, index) {\n                if (index === 0) {\n                    radio.checked = true;\n                } else if (radio.checked === true) {\n                    radio.checked = false;\n                }\n            });\n        }\n    }\n\n    return {\n        /**\n         * Initialise star rating for self-assess question behaviour.\n         *\n         * @param {string} questionId id of the outer question div\n         */\n        init: function(questionId) {\n            M.util.js_pending('rating-' + questionId);\n            let questionDiv = document.getElementById(questionId);\n            new Rating(questionDiv);\n            M.util.js_complete('rating-' + questionId);\n        }\n    };\n});\n"],"file":"rating.min.js"}